<% layout('layouts/boilerplate.ejs')%>
<!--  -->

<div class="container">
  <div class="row height d-flex justify-content-center align-items-center">
      <div class="col-md-8">
          <div class="search"> 
            <i class="fa fa-search"></i> 
            <form class="search" action="/users/search" method="GET">
            <input name="searchRequest" type="text" class="form-control" placeholder="Feeling lonely? Look for a friend">
             <button type="submit" class="btn btn-primary">Search</button> 
             </form>
          </div>
      </div>
  </div>
</div>
<!--  -->
<% if(foundUsers){ %> 
  <!--  -->
  <% foundUsers.forEach(function(user){ %> 
    <!--  -->
    
  <div class="card mb-3 p-3">
    <a href="/user/<%= user._id %> "
      ><h5 class="card-title"><%= user.username %></h5></a
    >
    <h5 class="card-subtitle"><%= user.email %></h5>
  </div>
<!--  -->
  <% } )%> 
<!--  -->
  <% } %> 
<!--  -->
<div class="container px-4 py-5" id="custom-cards">
  <h2 class="pb-2 border-bottom">All Friends</h2>

  <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5">


  <% users.forEach(function(user){ %>
    <!--  -->
    <% if(user._id.toString() === currentUser._id.toString()){ %> 
    <!--  -->
      <% user.friends.forEach(function(friend){ %>
        <div class="col-lg-4">
          <div class="text-center card-box">
              <div class="member-card pt-2 pb-2">
                  <div class="thumb-lg member-thumb mx-auto">
                    <img    src="
                    <%= friend.image.url 
                    ? friend.image.url 
                    : '/images/default_profile_image.jpg'%>" class="rounded-circle img-thumbnail" alt="profile-image">
                  </div>
                  <div class="">
                      <h4><%= friend.username %></h4>
                      <p class="text-muted"><%= friend.email %> </p>
                  </div>

                  <a href="/user/<%= friend._id %> " class="btn btn-primary mt-3 btn-rounded waves-effect w-md waves-light">View Profile</a>
<!-- 
                  <div class="mt-4">
                      <div class="row">
                          <div class="col-4">
                              <div class="mt-3">
                                  <h4>2563</h4>
                                  <p class="mb-0 text-muted">Wallets Balance</p>
                              </div>
                          </div>
                          <div class="col-4">
                              <div class="mt-3">
                                  <h4>6952</h4>
                                  <p class="mb-0 text-muted">Income amounts</p>
                              </div>
                          </div>
                          <div class="col-4">
                              <div class="mt-3">
                                  <h4>1125</h4>
                                  <p class="mb-0 text-muted">Total Transactions</p>
                              </div>
                          </div>
                      </div>
                  </div> -->
              </div>
          </div>
      </div>


      <% }) %> 
    <!--  -->
    <%} %> 
      <!--  -->
    <%}) %> 


  </div>

</div>
</div>
